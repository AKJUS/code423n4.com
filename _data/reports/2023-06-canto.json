{
  "circa": {
    "title": "Canto",
    "sponsor": "Canto",
    "slug": "2023-06-canto",
    "date": "2023-09-29",
    "findings": "https://github.com/code-423n4/2023-06-canto-findings/issues",
    "contest": 252
  },
  "html": "<h1 id=\"overview\" style=\"position:relative;\"><a href=\"#overview\" aria-label=\"overview permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overview</h1>\n<h2 id=\"about-c4\" style=\"position:relative;\"><a href=\"#about-c4\" aria-label=\"about c4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>About C4</h2>\n<p>Code4rena (C4) is an open organization consisting of security researchers, auditors, developers, and individuals with domain expertise in smart contracts.</p>\n<p>A C4 audit is an event in which community participants, referred to as Wardens, review, audit, or analyze smart contract logic in exchange for a bounty provided by sponsoring projects.</p>\n<p>During the audit outlined in this document, C4 conducted an analysis of the Canto system written in Go. The audit took place between June 20â€”June 23 2023.</p>\n<h2 id=\"wardens\" style=\"position:relative;\"><a href=\"#wardens\" aria-label=\"wardens permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wardens</h2>\n<p>24 Wardens contributed reports to the Canto:</p>\n<ol>\n<li><a href=\"https://code4rena.com/@sces60107\">sces60107</a></li>\n<li><a href=\"https://code4rena.com/@dontonka\">dontonka</a></li>\n<li><a href=\"https://code4rena.com/@3docSec\">3docSec</a></li>\n<li><a href=\"https://code4rena.com/@Franfran\">Franfran</a></li>\n<li>Team_FliBit (<a href=\"https://code4rena.com/@14si2o_Flint\">14si2o_Flint</a> and <a href=\"https://code4rena.com/@Naubit\">Naubit</a>)</li>\n<li><a href=\"https://code4rena.com/@Lirios\">Lirios</a></li>\n<li><a href=\"https://code4rena.com/@yaarduck\">yaarduck</a></li>\n<li><a href=\"https://code4rena.com/@hihen\">hihen</a></li>\n<li><a href=\"https://code4rena.com/@Rolezn\">Rolezn</a></li>\n<li><a href=\"https://code4rena.com/@erebus\">erebus</a></li>\n<li><a href=\"https://code4rena.com/@seerether\">seerether</a></li>\n<li><a href=\"https://code4rena.com/@0xNightRaven\">0xNightRaven</a></li>\n<li><a href=\"https://code4rena.com/@0xSmartContract\">0xSmartContract</a></li>\n<li><a href=\"https://code4rena.com/@Udsen\">Udsen</a></li>\n<li><a href=\"https://code4rena.com/@kutugu\">kutugu</a></li>\n<li><a href=\"https://code4rena.com/@squeaky_cactus\">squeaky_cactus</a></li>\n<li><a href=\"https://code4rena.com/@DevABDee\">DevABDee</a></li>\n<li><a href=\"https://code4rena.com/@solsaver\">solsaver</a></li>\n<li><a href=\"https://code4rena.com/@vuquang23\">vuquang23</a></li>\n<li><a href=\"https://code4rena.com/@max10afternoon\">max10afternoon</a></li>\n<li><a href=\"https://code4rena.com/@nadin\">nadin</a></li>\n<li><a href=\"https://code4rena.com/@Shogoki\">Shogoki</a></li>\n<li><a href=\"https://code4rena.com/@kaveyjoe\">kaveyjoe</a></li>\n</ol>\n<p>This audit was judged by <a href=\"https://code4rena.com/@0xean\">0xean</a>.</p>\n<p>Final report assembled by PaperParachute and <a href=\"https://twitter.com/liveactionllama\">liveactionllama</a>.</p>\n<h1 id=\"summary\" style=\"position:relative;\"><a href=\"#summary\" aria-label=\"summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Summary</h1>\n<p>The C4 analysis yielded an aggregated total of 2 unique vulnerabilities. Of these vulnerabilities, 1 received a risk rating in the category of HIGH severity and 1 received a risk rating in the category of MEDIUM severity.</p>\n<p>Additionally, C4 analysis included 12 reports detailing issues with a risk rating of LOW severity or non-critical.</p>\n<p>All of the issues presented here are linked back to their original finding.</p>\n<h1 id=\"scope\" style=\"position:relative;\"><a href=\"#scope\" aria-label=\"scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Scope</h1>\n<p>The code under review can be found within the <a href=\"https://github.com/code-423n4/2023-06-canto\">C4 Canto repository</a>, and is composed of 4 files written in the Go programming language and includes 289 lines of code.</p>\n<h1 id=\"severity-criteria\" style=\"position:relative;\"><a href=\"#severity-criteria\" aria-label=\"severity criteria permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Severity Criteria</h1>\n<p>C4 assesses the severity of disclosed vulnerabilities based on three primary risk categories: high, medium, and low/non-critical.</p>\n<p>High-level considerations for vulnerabilities span the following key areas when conducting assessments:</p>\n<ul>\n<li>Malicious Input Handling</li>\n<li>Escalation of privileges</li>\n<li>Arithmetic</li>\n<li>Gas use</li>\n</ul>\n<p>For more information regarding the severity criteria referenced throughout the submission review process, please refer to the documentation provided on <a href=\"https://code4rena.com\">the C4 website</a>, specifically our section on <a href=\"https://docs.code4rena.com/awarding/judging-criteria/severity-categorization\">Severity Categorization</a>.</p>\n<h1 id=\"high-risk-findings-1\" style=\"position:relative;\"><a href=\"#high-risk-findings-1\" aria-label=\"high risk findings 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>High Risk Findings (1)</h1>\n<h2 id=\"h-01-pre-defined-limit-is-different-from-the-spec\" style=\"position:relative;\"><a href=\"#h-01-pre-defined-limit-is-different-from-the-spec\" aria-label=\"h 01 pre defined limit is different from the spec permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/36\">[H-01] Pre-defined limit is different from the spec</a></h2>\n<p><em>Submitted by <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/36\">sces60107</a>, also found by <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/95\">Franfran</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/48\">Team_FliBit</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/45\">dontonka</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/11\">Lirios</a>, and <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/8\">3docSec</a></em></p>\n<p><a href=\"https://github.com/code-423n4/2023-06-canto/blob/main/Canto/x/coinswap/keeper/swap.go#L212\">https://github.com/code-423n4/2023-06-canto/blob/main/Canto/x/coinswap/keeper/swap.go#L212</a><br>\n<a href=\"https://github.com/code-423n4/2023-06-canto/blob/main/Canto/x/coinswap/types/params.go#L34\">https://github.com/code-423n4/2023-06-canto/blob/main/Canto/x/coinswap/types/params.go#L34</a></p>\n<h3 id=\"impact\" style=\"position:relative;\"><a href=\"#impact\" aria-label=\"impact permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Impact</h3>\n<p>In the spec, the pre-defined limit of ETH is 0.01 ETHs. But the actual limit in the code is not 0.01 ETH which could result in misleading.</p>\n<h3 id=\"proof-of-concept\" style=\"position:relative;\"><a href=\"#proof-of-concept\" aria-label=\"proof of concept permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<p>In the spec, it said that the pre-defined limit of ETH is 0.01 ETHs.<br>\n<a href=\"https://github.com/code-423n4/2023-06-canto/blob/main/README.md#swap\">https://github.com/code-423n4/2023-06-canto/blob/main/README.md#swap</a></p>\n<blockquote>\n<p>For risk management purposes, a swap will fail if the input coin amount exceeds a pre-defined limit (10 USDC, 10 USDT, 0.01 ETH) or if the swap amount limit is not defined.</p>\n</blockquote>\n<p>But in <code>x/coinswap/types/params.go</code>, the actual limit of ETH is 1*10e17 which is 0.1 ETH.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Parameter store keys</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">var</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">KeyFee</span><span class=\"mtk1\">                    = []</span><span class=\"mtk11\">byte</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;Fee&quot;</span><span class=\"mtk1\">)                    </span><span class=\"mtk3\">// fee key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">KeyPoolCreationFee</span><span class=\"mtk1\">        = []</span><span class=\"mtk11\">byte</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;PoolCreationFee&quot;</span><span class=\"mtk1\">)        </span><span class=\"mtk3\">// fee key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">KeyTaxRate</span><span class=\"mtk1\">                = []</span><span class=\"mtk11\">byte</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;TaxRate&quot;</span><span class=\"mtk1\">)                </span><span class=\"mtk3\">// fee key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">KeyStandardDenom</span><span class=\"mtk1\">          = []</span><span class=\"mtk11\">byte</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;StandardDenom&quot;</span><span class=\"mtk1\">)          </span><span class=\"mtk3\">// standard token denom key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">KeyMaxStandardCoinPerPool</span><span class=\"mtk1\"> = []</span><span class=\"mtk11\">byte</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;MaxStandardCoinPerPool&quot;</span><span class=\"mtk1\">) </span><span class=\"mtk3\">// max standard coin amount per pool</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">KeyMaxSwapAmount</span><span class=\"mtk1\">          = []</span><span class=\"mtk11\">byte</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;MaxSwapAmount&quot;</span><span class=\"mtk1\">)          </span><span class=\"mtk3\">// whitelisted denoms</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">DefaultFee</span><span class=\"mtk1\">                    = </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewDecWithPrec</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">DefaultPoolCreationFee</span><span class=\"mtk1\">        = </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewInt64Coin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk12\">DefaultBondDenom</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">DefaultTaxRate</span><span class=\"mtk1\">                = </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewDecWithPrec</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">0</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">DefaultMaxStandardCoinPerPool</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewIntWithDecimal</span><span class=\"mtk1\">(</span><span class=\"mtk7\">10000</span><span class=\"mtk1\">, </span><span class=\"mtk7\">18</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">DefaultMaxSwapAmount</span><span class=\"mtk1\">          = </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewCoins</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewCoin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">UsdcIBCDenom</span><span class=\"mtk1\">, </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewIntWithDecimal</span><span class=\"mtk1\">(</span><span class=\"mtk7\">10</span><span class=\"mtk1\">, </span><span class=\"mtk7\">6</span><span class=\"mtk1\">)),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewCoin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">UsdtIBCDenom</span><span class=\"mtk1\">, </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewIntWithDecimal</span><span class=\"mtk1\">(</span><span class=\"mtk7\">10</span><span class=\"mtk1\">, </span><span class=\"mtk7\">6</span><span class=\"mtk1\">)),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewCoin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">EthIBCDenom</span><span class=\"mtk1\">, </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk11\">NewIntWithDecimal</span><span class=\"mtk1\">(</span><span class=\"mtk7\">1</span><span class=\"mtk1\">, </span><span class=\"mtk7\">17</span><span class=\"mtk1\">)),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">)</span></span></span></code></pre>\n<p>The limit is used in <code>swap.GetMaximumSwapAmount</code>. Wrong could harm the risk management. <br><a href=\"https://github.com/code-423n4/2023-06-canto/blob/main/Canto/x/coinswap/keeper/swap.go#L212\">https://github.com/code-423n4/2023-06-canto/blob/main/Canto/x/coinswap/keeper/swap.go#L212</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"solidity\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">func</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">k</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Keeper</span><span class=\"mtk1\">) </span><span class=\"mtk11\">GetMaximumSwapAmount</span><span class=\"mtk1\">(</span><span class=\"mtk12\">ctx</span><span class=\"mtk1\"> </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Context</span><span class=\"mtk1\">, </span><span class=\"mtk12\">denom</span><span class=\"mtk1\"> </span><span class=\"mtk12\">string</span><span class=\"mtk1\">) (</span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Coin</span><span class=\"mtk1\">, </span><span class=\"mtk12\">error</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\tparams := </span><span class=\"mtk12\">k</span><span class=\"mtk1\">.</span><span class=\"mtk11\">GetParams</span><span class=\"mtk1\">(</span><span class=\"mtk12\">ctx</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk12\">for</span><span class=\"mtk1\"> </span><span class=\"mtk12\">_</span><span class=\"mtk1\">, coin := </span><span class=\"mtk12\">range</span><span class=\"mtk1\"> </span><span class=\"mtk12\">params</span><span class=\"mtk1\">.</span><span class=\"mtk12\">MaxSwapAmount</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t</span><span class=\"mtk15\">if</span><span class=\"mtk1\"> </span><span class=\"mtk12\">coin</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Denom</span><span class=\"mtk1\"> == </span><span class=\"mtk12\">denom</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t</span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">coin</span><span class=\"mtk1\">, </span><span class=\"mtk12\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">sdk</span><span class=\"mtk1\">.</span><span class=\"mtk12\">Coin</span><span class=\"mtk1\">{}, </span><span class=\"mtk12\">sdkerrors</span><span class=\"mtk1\">.</span><span class=\"mtk11\">Wrap</span><span class=\"mtk1\">(</span><span class=\"mtk12\">types</span><span class=\"mtk1\">.</span><span class=\"mtk12\">ErrInvalidDenom</span><span class=\"mtk1\">, </span><span class=\"mtk12\">fmt</span><span class=\"mtk1\">.</span><span class=\"mtk11\">Sprintf</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;invalid denom: %s, denom is not whitelisted&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">denom</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h3 id=\"recommended-mitigation-steps\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps\" aria-label=\"recommended mitigation steps permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>0.01 ETH should be <code>sdk.NewIntWithDecimal(1, 16)</code>.</p>\n<h3 id=\"assessed-type\" style=\"position:relative;\"><a href=\"#assessed-type\" aria-label=\"assessed type permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assessed type</h3>\n<p>Error</p>\n<p><strong><a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/36#issuecomment-1619137392\">0xean (judge) increased severity to High</a></strong></p>\n<p><strong><a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/8#issuecomment-1611705902\">tkkwon1998 (Canto) confirmed and commented on duplicate issue 8</a>:</strong></p>\n<blockquote>\n<p>Agreed, this issue is valid as limit is 10x higher than it should be. Although losses are still minimal (0.1 eth at most), I agree with high risk since funds can be lost if pools are manipulated.</p>\n</blockquote>\n<hr>\n<h1 id=\"medium-risk-findings-1\" style=\"position:relative;\"><a href=\"#medium-risk-findings-1\" aria-label=\"medium risk findings 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Medium Risk Findings (1)</h1>\n<h2 id=\"m-01-potential-risk-of-using-swappedamount-in-case-of-swap-error\" style=\"position:relative;\"><a href=\"#m-01-potential-risk-of-using-swappedamount-in-case-of-swap-error\" aria-label=\"m 01 potential risk of using swappedamount in case of swap error permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/71\">[M-01] Potential risk of using <code>swappedAmount</code> in case of swap error</a></h2>\n<p><em>Submitted by <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/71\">yaarduck</a>, also found by <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/80\">hihen</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/69\">yaarduck</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/58\">erebus</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/30\">sces60107</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/19\">Rolezn</a>, and <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/5\">seerether</a></em></p>\n<p><a href=\"https://github.com/code-423n4/2023-06-canto/blob/main/Canto/x/onboarding/keeper/ibc_callbacks.go#L93-L96\">https://github.com/code-423n4/2023-06-canto/blob/main/Canto/x/onboarding/keeper/ibc_callbacks.go#L93-L96</a> <br><a href=\"https://github.com/code-423n4/2023-06-canto/blob/a4ff2fd2e67e77e36528fad99f9d88149a5e8532/Canto/x/onboarding/keeper/ibc_callbacks.go#L124\">https://github.com/code-423n4/2023-06-canto/blob/a4ff2fd2e67e77e36528fad99f9d88149a5e8532/Canto/x/onboarding/keeper/ibc_callbacks.go#L124</a></p>\n<h3 id=\"impact-1\" style=\"position:relative;\"><a href=\"#impact-1\" aria-label=\"impact 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Impact</h3>\n<p>In case the swap operation failed, the module should continue as is with the erc20 conversion and finish the IBC transfer. This is the relevant part of the code that swallows the error:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">swappedAmount, err = k.coinswapKeeper.TradeInputForExactOutput(ctx, coinswaptypes.Input{Coin: transferredCoin, Address: recipient.String()}, coinswaptypes.Output{Coin: swapCoins, Address: recipient.String()})</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">if err != nil {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    logger.Error(&quot;failed to swap coins&quot;, &quot;error&quot;, err)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">} </span></span></code></pre>\n<p>Notice that in case of an error, <code>swappedAmount</code> will still be written to.</p>\n<p>Later on in the code, it is used to calculate the conversion amount:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">convertCoin := sdk.NewCoin(transferredCoin.Denom, transferredCoin.Amount.Sub(swappedAmount))</span></span></code></pre>\n<p>The <code>swappedAmount</code> is trusted to have a zero value in this case. While this is currently true in the existing code, variables returned in error states should not be trusted and should be overwritten.</p>\n<p>Currently all error states return <code>sdk.ZeroInt()</code> unless the swap was executed correctly, but it might change in  a future PR.</p>\n<h3 id=\"proof-of-concept-1\" style=\"position:relative;\"><a href=\"#proof-of-concept-1\" aria-label=\"proof of concept 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proof of Concept</h3>\n<ol>\n<li>Run this patch, it will cause TradeInputForExactOutput to always error with a swappedAmount > 0 .</li>\n</ol>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">    diff --git a/Canto/x/coinswap/keeper/swap.go b/Canto/x/coinswap/keeper/swap.go</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    index 67e04ef..a331bcf 100644</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    --- a/Canto/x/coinswap/keeper/swap.go</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    +++ b/Canto/x/coinswap/keeper/swap.go</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    @@ -2,6 +2,7 @@ package keeper</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">     </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">     import (</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            &quot;fmt&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    +</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            sdk &quot;github.com/cosmos/cosmos-sdk/types&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            sdkerrors &quot;github.com/cosmos/cosmos-sdk/types/errors&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">     </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    @@ -160,51 +161,8 @@ Buy exact amount of a token by specifying the max amount of another token, one o</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">     @param receipt : address of the receiver</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">     @return : actual amount of the token to be paid</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">     */</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -func (k Keeper) TradeInputForExactOutput(ctx sdk.Context, input types.Input, output types.Output) (sdk.Int, error) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       soldTokenAmt, err := k.calculateWithExactOutput(ctx, output.Coin, input.Coin.Denom)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       if err != nil {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -               return sdk.ZeroInt(), err</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       // assert that the calculated amount is less than the</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       // max amount the buyer is willing to pay.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       if soldTokenAmt.GT(input.Coin.Amount) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -               return sdk.ZeroInt(), sdkerrors.Wrap(types.ErrConstraintNotMet, fmt.Sprintf(&quot;insufficient amount of %s, user expected: %s, actual: %s&quot;, input.Coin.Denom, input.Coin.Amount.String(), soldTokenAmt.String()))</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       soldToken := sdk.NewCoin(input.Coin.Denom, soldTokenAmt)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       inputAddress, err := sdk.AccAddressFromBech32(input.Address)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       if err != nil {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -               return sdk.ZeroInt(), err</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       outputAddress, err := sdk.AccAddressFromBech32(output.Address)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       if err != nil {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -               return sdk.ZeroInt(), err</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       standardDenom := k.GetStandardDenom(ctx)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       var quoteCoinToSwap sdk.Coin</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       if soldToken.Denom != standardDenom {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -               quoteCoinToSwap = soldToken</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       } else {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -               quoteCoinToSwap = output.Coin</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       maxSwapAmount, err := k.GetMaximumSwapAmount(ctx, quoteCoinToSwap.Denom)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       if err != nil {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -               return sdk.ZeroInt(), err</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       if quoteCoinToSwap.Amount.GT(maxSwapAmount.Amount) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -               return sdk.ZeroInt(), sdkerrors.Wrap(types.ErrConstraintNotMet, fmt.Sprintf(&quot;expected swap amount %s%s exceeding swap amount limit %s%s&quot;, quoteCoinToSwap.Amount.String(), quoteCoinToSwap.Denom, maxSwapAmount.Amount.String(), maxSwapAmount.Denom))</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       if err := k.swapCoins(ctx, inputAddress, outputAddress, soldToken, output.Coin); err != nil {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -               return sdk.ZeroInt(), err</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    -       return soldTokenAmt, nil</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    +func (k Keeper) TradeInputForExactOutput(_ sdk.Context, _ types.Input, _ types.Output) (sdk.Int, error) {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    +       return sdk.NewIntFromUint64(10000), fmt.Errorf(&quot;swap error&quot;)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">     }</span></span></code></pre>\n<ol start=\"2\">\n<li>Add this test to <code>x/onboarding/keeper/ibc_callbacks_test.go</code> :</li>\n</ol>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">    {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        &quot;swap fails with swappedAmount / convert remaining ibc token - some vouchers are not converted&quot;,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        func() {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            transferAmount = sdk.NewIntWithDecimal(25, 6)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            transfer := transfertypes.NewFungibleTokenPacketData(denom, transferAmount.String(), secpAddrCosmos, ethsecpAddrcanto)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            bz := transfertypes.ModuleCdc.MustMarshalJSON(&amp;transfer)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">            packet = channeltypes.NewPacket(bz, 100, transfertypes.PortID, sourceChannel, transfertypes.PortID, cantoChannel, timeoutHeight, 0)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        },</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        true,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        sdk.NewCoins(sdk.NewCoin(&quot;acanto&quot;, sdk.NewIntWithDecimal(3, 18))),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        sdk.NewCoin(&quot;acanto&quot;, sdk.NewIntWithDecimal(3, 18)),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        sdk.NewCoin(uusdcIbcdenom, sdk.NewIntFromUint64(10000)),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        sdk.NewInt(24990000),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    },</span></span></code></pre>\n<p>The test will still fail because of another unimportant check, but the important check will pass - the address will have <code>sent-swappedAmount</code> vouchers converted, and the rest will be kept.</p>\n<p>It means swappedAmount was used even though the swap function failed.</p>\n<h3 id=\"tools-used\" style=\"position:relative;\"><a href=\"#tools-used\" aria-label=\"tools used permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tools Used</h3>\n<p>IDE.</p>\n<h3 id=\"recommended-mitigation-steps-1\" style=\"position:relative;\"><a href=\"#recommended-mitigation-steps-1\" aria-label=\"recommended mitigation steps 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation Steps</h3>\n<p>Zero the <code>swappedAmount</code> variable in the error case:</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">swappedAmount = sdk.ZeroInt()</span></span></code></pre>\n<h3 id=\"assessed-type-1\" style=\"position:relative;\"><a href=\"#assessed-type-1\" aria-label=\"assessed type 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assessed type</h3>\n<p>Other</p>\n<p><strong><a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/80#issuecomment-1612272077\">tkkwon1998 (Canto) confirmed and commented on duplicate issue 80</a>:</strong></p>\n<blockquote>\n<p>The warden is correct in that a swap could go only half-completed if the function is used incorrectly, but all of the checks should occur before it ever gets to the swap function to ensure it succeeds fully. In our case, all of the checks are done in <code>TradeInputForExactOutput</code>. If the warden believes we are missing any checks which may cause the swap to only half-complete, then that would be great.</p>\n<p>I will mark this as valid because, as the warden mentioned, if any future upgrades use the swap function, there may be a potential that they do not do the necessary checks.</p>\n</blockquote>\n<hr>\n<h1 id=\"low-risk-and-non-critical-issues\" style=\"position:relative;\"><a href=\"#low-risk-and-non-critical-issues\" aria-label=\"low risk and non critical issues permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Low Risk and Non-Critical Issues</h1>\n<p>For this audit, 9 reports were submitted by wardens detailing low risk and non-critical issues. The <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/46\">report highlighted below</a> by <strong>squeaky_cactus</strong> received the top score from the judge.</p>\n<p><em>The following wardens also submitted reports: <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/97\">solsaver</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/62\">vuquang23</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/59\">DevABDee</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/34\">nadin</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/20\">Rolezn</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/16\">Shogoki</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/14\">kaveyjoe</a>, and <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/12\">3docSec</a>.</em></p>\n<h2 id=\"issue-summary\" style=\"position:relative;\"><a href=\"#issue-summary\" aria-label=\"issue summary permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Issue Summary</h2>\n<p>2 low issues and 8 non-critical found.</p>\n<table>\n<thead>\n<tr>\n<th>Id</th>\n<th>Issue</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>L-01</td>\n<td>Misleading method GoDoc <code>calculateWithExactInput</code></td>\n</tr>\n<tr>\n<td>L-02</td>\n<td>Misleading method GoDoc <code>GetPoolBalances</code></td>\n</tr>\n<tr>\n<td>N-01</td>\n<td>Dead GoDoc params for <code>TradeExactInputForOutput</code></td>\n</tr>\n<tr>\n<td>N-02</td>\n<td>Dead GoDoc params for <code>TradeInputForExactOutput</code></td>\n</tr>\n<tr>\n<td>N-03</td>\n<td>Params has both value and reference receivers</td>\n</tr>\n<tr>\n<td>N-04</td>\n<td>Deprecated method on <code>EmitEvent</code> used</td>\n</tr>\n<tr>\n<td>N-05</td>\n<td>Silent fail on no whitelisting</td>\n</tr>\n<tr>\n<td>N-06</td>\n<td>Silent fail on recipient account being a module</td>\n</tr>\n<tr>\n<td>N-07</td>\n<td>Silent fail on missing ERC20 mapping</td>\n</tr>\n<tr>\n<td>N-08</td>\n<td>Silent fail on trading pair disable</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"l-01-misleading-method-godoc-calculatewithexactinput\" style=\"position:relative;\"><a href=\"#l-01-misleading-method-godoc-calculatewithexactinput\" aria-label=\"l 01 misleading method godoc calculatewithexactinput permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[L-01] Misleading method GoDoc <code>calculateWithExactInput</code></h2>\n<p>GoDoc paramater of <code>soldTokenDenom</code> on <code>swap:calculateWithExactInput</code> is not a function parameter, however there is a boughtTokenDenom parameter (which would be an inversion of the GoDoc description).</p>\n<h3 id=\"recommended-mitigation\" style=\"position:relative;\"><a href=\"#recommended-mitigation\" aria-label=\"recommended mitigation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/coinswap/keeper/swap.go:L33</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">- @param soldTokenDenom : received token&#39;s denom</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+ @param boughtTokenDenom : demonination of token brought</span></span></code></pre>\n<h2 id=\"l-02-misleading-method-godoc-getpoolbalances\" style=\"position:relative;\"><a href=\"#l-02-misleading-method-godoc-getpoolbalances\" aria-label=\"l 02 misleading method godoc getpoolbalances permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[L-02] Misleading method GoDoc <code>GetPoolBalances</code></h2>\n<p>GoDoc method comment for <code>pool:GetPoolBalances</code> does not describe the method correctly (it may be a copy, paste &#x26; edit error from the proceeding method in the file).</p>\n<h3 id=\"recommended-mitigation-1\" style=\"position:relative;\"><a href=\"#recommended-mitigation-1\" aria-label=\"recommended mitigation 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/coinswap/keeper/pool.go:L69</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">- // GetPoolBalances return the liquidity pool by the specified anotherCoinDenom</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+ // GetPoolBalances returns the coin balances of the liquidity pool by the specified address</span></span></code></pre>\n<h2 id=\"n-01-dead-godoc-params-for-tradeexactinputforoutput\" style=\"position:relative;\"><a href=\"#n-01-dead-godoc-params-for-tradeexactinputforoutput\" aria-label=\"n 01 dead godoc params for tradeexactinputforoutput permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-01] Dead GoDoc params for <code>TradeExactInputForOutput</code></h2>\n<p>The GoDoc for <code>swap:TradeExactInputForOutput</code> contain two parameters are not in the method signature and there are no likely matching candidates, these lines should be deleted as theyâ€™ll only serve to sow confusion.</p>\n<p>swap.go L68-69<br>\n@param sender: address of the sender<br>\n@param receipt: address of the receiver</p>\n<h3 id=\"recommended-mitigation-2\" style=\"position:relative;\"><a href=\"#recommended-mitigation-2\" aria-label=\"recommended mitigation 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/coinswap/keeper/swap.go:L68-69</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-@param sender: address of the sender</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-@param receipt: address of the receiver</span></span></code></pre>\n<h2 id=\"n-02-dead-godoc-params-for-tradeinputforexactoutput\" style=\"position:relative;\"><a href=\"#n-02-dead-godoc-params-for-tradeinputforexactoutput\" aria-label=\"n 02 dead godoc params for tradeinputforexactoutput permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-02] Dead GoDoc params for <code>TradeInputForExactOutput</code></h2>\n<p>The GoDoc for <code>swap:TradeInputForExactOutput</code> contain two parameters are not in the method signature and there are no likely matching candidates, these lines should be deleted as theyâ€™ll only serve to sow confusion.</p>\n<p>swap.go L68-69<br>\n@param sender: address of the sender<br>\n@param receipt: address of the receiver</p>\n<h3 id=\"recommended-mitigation-3\" style=\"position:relative;\"><a href=\"#recommended-mitigation-3\" aria-label=\"recommended mitigation 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/coinswap/keeper/swap.go:L159-160</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-@param sender : address of the sender</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-@param receipt : address of the receiver</span></span></code></pre>\n<h2 id=\"n-03-params-has-both-value-and-reference-receivers\" style=\"position:relative;\"><a href=\"#n-03-params-has-both-value-and-reference-receivers\" aria-label=\"n 03 params has both value and reference receivers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-03] Params has both value and reference receivers</h2>\n<p>Params has two methods, one uses pointer and the other a value reciver. GoLang documentation recommends choosing either one or the other.<br>\n(Arguments being consistency, readability and performance)<br>\n<a href=\"https://go.dev/doc/faq#methods_on_values_or_pointers\">https://go.dev/doc/faq#methods_on_values_or_pointers</a></p>\n<p>The Validate method is currently using a value receiever, this can be changed to a pointer without side affect (avoiding copying the struct on each call).</p>\n<h3 id=\"recommended-mitigation-4\" style=\"position:relative;\"><a href=\"#recommended-mitigation-4\" aria-label=\"recommended mitigation 4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<p>Change the <code>Params</code> from value to reference.</p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/onboarding/keeper/params.go:L89</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">- func (p Params) Validate() error {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+ func (p *Params) Validate() error {</span></span></code></pre>\n<h2 id=\"n-04-deprecated-method-on-emitevent-used\" style=\"position:relative;\"><a href=\"#n-04-deprecated-method-on-emitevent-used\" aria-label=\"n 04 deprecated method on emitevent used permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-04] Deprecated method on <code>EmitEvent</code> used</h2>\n<p>EmitEvent is deprecated in favor of EmitTypedEvent.<br>\n<a href=\"https://pkg.go.dev/github.com/cosmos/cosmos-sdk/types@v0.45.9#EventManager.EmitEvent\">https://pkg.go.dev/github.com/cosmos/cosmos-sdk/types@v0.45.9#EventManager.EmitEvent</a></p>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/onboarding/kepper/ibc_callbacks.go:L97-105</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\t\tctx.EventManager().EmitEvent(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\t\t\tsdk.NewEvent(</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\t\t\t\tcoinswaptypes.EventTypeSwap,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\t\t\t\tsdk.NewAttribute(coinswaptypes.AttributeValueAmount, swappedAmount.String()),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\t\t\t\tsdk.NewAttribute(coinswaptypes.AttributeValueSender, recipient.String()),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\t\t\t\tsdk.NewAttribute(coinswaptypes.AttributeValueRecipient, recipient.String()),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\t\t\t\tsdk.NewAttribute(coinswaptypes.AttributeValueIsBuyOrder, strconv.FormatBool(true)),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\t\t\t\tsdk.NewAttribute(coinswaptypes.AttributeValueTokenPair, coinswaptypes.GetTokenPairByDenom(transferredCoin.Denom, swapCoins.Denom)),</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">\t\t\t\t),</span></span></code></pre>\n<h3 id=\"recommended-mitigation-5\" style=\"position:relative;\"><a href=\"#recommended-mitigation-5\" aria-label=\"recommended mitigation 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<p>Use <code>EmitTypedEvent</code>.</p>\n<h2 id=\"n-05-silent-fail-on-no-whitelisting\" style=\"position:relative;\"><a href=\"#n-05-silent-fail-on-no-whitelisting\" aria-label=\"n 05 silent fail on no whitelisting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-05] Silent fail on no whitelisting</h2>\n<p>There is no logging on the early return condition of no whitelisted channels found for the destination channel.</p>\n<p>Logging this return condition would provide a data point for observability, supporting system monitoring and issue diagnosis.</p>\n<h3 id=\"recommended-mitigation-6\" style=\"position:relative;\"><a href=\"#recommended-mitigation-6\" aria-label=\"recommended mitigation 6 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/onboarding/kepper/ibc_callbacks.go:L56</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+logger.Error(&quot;no whitelist channel found for %s&quot;,packet.DestinationChannel)</span></span></code></pre>\n<h2 id=\"n-06-silent-fail-on-recipient-account-being-a-module\" style=\"position:relative;\"><a href=\"#n-06-silent-fail-on-recipient-account-being-a-module\" aria-label=\"n 06 silent fail on recipient account being a module permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-06] Silent fail on recipient account being a module</h2>\n<p>There is no logging on the early return condition when the recipient account is a module.</p>\n<p>Logging this return condition would provide a data point for observability, supporting system monitoring and issue diagnosis.</p>\n<h3 id=\"recommended-mitigation-7\" style=\"position:relative;\"><a href=\"#recommended-mitigation-7\" aria-label=\"recommended mitigation 7 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/onboarding/kepper/ibc_callbacks.go:L71</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+logger.Error(&quot;recipient account is a module %s&quot;,account.GetAddress())</span></span></code></pre>\n<h2 id=\"n-07-silent-fail-on-missing-erc20-mapping\" style=\"position:relative;\"><a href=\"#n-07-silent-fail-on-missing-erc20-mapping\" aria-label=\"n 07 silent fail on missing erc20 mapping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-07] Silent fail on missing ERC20 mapping</h2>\n<p>There is no logging on the early return condition when no ERC20 mapping is found for the denom.</p>\n<p>Logging this return condition would provide a data point for observability, supporting system monitoring and issue diagnosis.</p>\n<h3 id=\"recommended-mitigation-8\" style=\"position:relative;\"><a href=\"#recommended-mitigation-8\" aria-label=\"recommended mitigation 8 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/onboarding/kepper/ibc_callbacks.go:L120</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+logger.Error(&quot;no ERC20 mapping found for %s&quot;,transferredCoin.Denom)</span></span></code></pre>\n<h2 id=\"n-08-silent-fail-on-trading-pair-disable\" style=\"position:relative;\"><a href=\"#n-08-silent-fail-on-trading-pair-disable\" aria-label=\"n 08 silent fail on trading pair disable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[N-08] Silent fail on trading pair disable</h2>\n<p>There is no logging on the early return condition when the trading pair is disabled.</p>\n<p>Logging this return condition would provide a data point for observability, supporting system monitoring and issue diagnosis.</p>\n<h3 id=\"recommended-mitigation-9\" style=\"position:relative;\"><a href=\"#recommended-mitigation-9\" aria-label=\"recommended mitigation 9 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommended Mitigation</h3>\n<pre class=\"grvsc-container dark-default-dark\" data-language=\"\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">x/onboarding/kepper/ibc_callbacks.go:L127</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+logger.Error(&quot;disabled trading pair with id %s&quot;,pairID)</span></span></code></pre>\n<p><strong><a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/46#issuecomment-1611853505\">tkkwon1998 (Canto) confirmed and commented</a>:</strong></p>\n<blockquote>\n<p>Really nice QA report.</p>\n</blockquote>\n<hr>\n<h1 id=\"audit-analysis\" style=\"position:relative;\"><a href=\"#audit-analysis\" aria-label=\"audit analysis permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Audit Analysis</h1>\n<p>For this audit, 3 analysis reports were submitted by wardens. An analysis report examines the codebase as a whole, providing observations and advice on such topics as architecture, mechanism, or approach. The <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/21\">report highlighted below</a> by <strong>0xNightRaven</strong> received the top score from the judge.</p>\n<p><em>The following wardens also submitted reports: <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/98\">0xSmartContract</a>, <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/64\">Udsen</a>, and  <a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/40\">kutugu</a>.</em></p>\n<h2 id=\"approach-to-auditing-the-canto-platform\" style=\"position:relative;\"><a href=\"#approach-to-auditing-the-canto-platform\" aria-label=\"approach to auditing the canto platform permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Approach to Auditing the Canto Platform</h2>\n<h3 id=\"phase-1-documentation-and-video-review\" style=\"position:relative;\"><a href=\"#phase-1-documentation-and-video-review\" aria-label=\"phase 1 documentation and video review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Phase 1: Documentation and Video Review</h3>\n<ul>\n<li>Start with a comprehensive review of all documentation related to the Canto platform, including the whitepaper, API documentation, developer guides, user guides, and any other available resources.</li>\n<li>Watch any available walkthrough videos to gain a holistic understanding of the system. Pay close attention to any details about the platformâ€™s architecture, operation, and possible edge cases.</li>\n<li>Note down any potential areas of concern or unclear aspects for further investigation.</li>\n</ul>\n<h3 id=\"phase-2-manual-code-inspection\" style=\"position:relative;\"><a href=\"#phase-2-manual-code-inspection\" aria-label=\"phase 2 manual code inspection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Phase 2: Manual Code Inspection</h3>\n<ul>\n<li>Once familiarized with the operation of the platform, start the process of manual code inspection.</li>\n<li>Review the codebase section by section, starting with the core smart contract logic. Pay particular attention to areas related to slippage handling, non-existing pools, and frontrunning prevention.</li>\n<li>Look for common vulnerabilities such as reentrancy, integer overflow/underflow, improper error handling, etc., while also ensuring the code conforms to best programming practices.</li>\n<li>Document any concerns or potential issues identified during this stage.</li>\n</ul>\n<h3 id=\"phase-3-review-of-ibc-documentation-and-external-integration\" style=\"position:relative;\"><a href=\"#phase-3-review-of-ibc-documentation-and-external-integration\" aria-label=\"phase 3 review of ibc documentation and external integration permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Phase 3: Review of IBC Documentation and External Integration</h3>\n<ul>\n<li>Thoroughly read the Inter-Blockchain Communication (IBC) protocol documentation. Ensure that Cantoâ€™s implementation is in line with the standard, and note any deviations.</li>\n<li>Evaluate the handling of cross-chain transactions and the robustness of Cantoâ€™s solution against possible external attacks or vulnerabilities.</li>\n<li>Examine how the platform integrates with external systems (e.g., oracles, other blockchains). Investigate how the platform handles communication errors or discrepancies in data from these systems.</li>\n<li>Note any potential weak points in the IBC and external integration implementation.</li>\n</ul>\n<h2 id=\"architecture-recommendations\" style=\"position:relative;\"><a href=\"#architecture-recommendations\" aria-label=\"architecture recommendations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Architecture Recommendations</h2>\n<p>Onboarding Module is well-designed with a proper sequence of operations. However, a few aspects should be noted:</p>\n<ol>\n<li>Error Handling: The error handling in the onboarding middleware should be enhanced. Currently, even if the swap or conversion fails, it does not revert IBC transfer. The onboarding process is non-atomic, meaning that the asset transferred to the Canto network will still remain in the Canto network. A robust error handling system can greatly improve the systemâ€™s reliability.</li>\n<li>Middleware Ordering: The middleware ordering seems to be well thought out. However, the impact of the order on the performance and reliability of the transactions should be assessed in a real-time scenario.</li>\n<li>Whitelisting Channels: The system works only when transactions are performed through a whitelisted channel. While this reduces risk, it could limit the flexibility of the system. Thus, further analysis of the trade-off between security and flexibility would be beneficial.</li>\n</ol>\n<h2 id=\"codebase-quality-analysis\" style=\"position:relative;\"><a href=\"#codebase-quality-analysis\" aria-label=\"codebase quality analysis permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Codebase Quality Analysis</h2>\n<p>The quality of the codebase appears to be of high quality and well-structured. A key aspect is the separation of concerns with different modules handling different aspects of the system, like onboarding, IBC transfers, and the Coinswap module.</p>\n<p>The usage of Go modules also increases the maintainability and readability of the code. The code is well-commented, which can be beneficial for future developers.</p>\n<p>However, it is recommended to use linters and static code analyzers to identify and rectify any potential security vulnerabilities, bugs, or code smells.</p>\n<h2 id=\"centralization-risks\" style=\"position:relative;\"><a href=\"#centralization-risks\" aria-label=\"centralization risks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Centralization Risks</h2>\n<p>There are risks related to the centralization of control in the system. A key risk area is the whitelisted channels for auto swap and convert. If the governance of the whitelisted channels is not properly decentralized, it may lead to centralization.</p>\n<p>Moreover, the parameters like <code>enable_onboarding</code> and <code>auto_swap_threshold</code> could be manipulated by a centralized entity. A clear governance structure should be implemented to mitigate these risks.</p>\n<h2 id=\"mechanism-review\" style=\"position:relative;\"><a href=\"#mechanism-review\" aria-label=\"mechanism review permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mechanism Review</h2>\n<p>The system utilizes the Inter-Blockchain Communication (IBC) protocol for the transfer of assets and the onboarding module is used to convert these assets into Canto tokens and ERC20 tokens automatically.</p>\n<p>The system uses an Automated Market Maker (AMM) model for swapping the assets. The Coinswap module handles the AMM functions. The overall mechanism seems to be well thought out.</p>\n<p>However, the system should analyze the potential risks and vulnerabilities associated with the AMM model, such as impermanent loss and the risk of liquidity pools being drained.</p>\n<h2 id=\"handling-of-slippage\" style=\"position:relative;\"><a href=\"#handling-of-slippage\" aria-label=\"handling of slippage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Handling of Slippage</h2>\n<p>Slippage is a significant issue in decentralized trading platforms, which occurs when the price changes during a transaction due to the liquidityâ€™s volatility. </p>\n<p>From the audit, it is observed that the Canto smart contract does not have explicit handling for slippage. This could lead to users experiencing unfavorable trade execution, especially for large orders that may move the price significantly. </p>\n<h3 id=\"recommendations\" style=\"position:relative;\"><a href=\"#recommendations\" aria-label=\"recommendations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommendations</h3>\n<ol>\n<li>Implement a slippage tolerance feature, where a user can specify a maximum acceptable price slippage for their trade. If the actual price slippage exceeds this tolerance, the transaction should be reverted.</li>\n<li>To further mitigate slippage, consider using price oracles to provide accurate and timely pricing data, which can help in better trade execution.</li>\n</ol>\n<h2 id=\"handling-of-non-existing-pools\" style=\"position:relative;\"><a href=\"#handling-of-non-existing-pools\" aria-label=\"handling of non existing pools permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Handling of Non-Existing Pools</h2>\n<p>Currently, it appears that the system does not have specific handling for non-existing pools. This could potentially lead to failed transactions and unsatisfactory user experiences.</p>\n<h3 id=\"recommendations-1\" style=\"position:relative;\"><a href=\"#recommendations-1\" aria-label=\"recommendations 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommendations</h3>\n<ol>\n<li>Implement a mechanism to check the existence of a pool before initiating a transaction. If a pool does not exist, the transaction should be prevented or reverted, and the user should be notified appropriately.</li>\n<li>Consider a feature that allows users or liquidity providers to create new pools when necessary, fostering a more flexible and user-friendly ecosystem.</li>\n</ol>\n<h2 id=\"systemic-risks\" style=\"position:relative;\"><a href=\"#systemic-risks\" aria-label=\"systemic risks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Systemic Risks</h2>\n<p>A systemic risk in this system is the dependence on the Gravity Bridge and Cosmos SDK. Any vulnerability or bug in the Gravity Bridge or Cosmos SDK would directly impact the Canto platform.</p>\n<p>The system also heavily relies on the proper functioning of the IBC. Any issues in the IBC protocol could potentially cause serious implications for the system.</p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>The Canto platform, with its onboarding module, provides a user-friendly approach to convert assets into Canto and ERC20 tokens. However, the system should pay attention to error handling, potential centralization risks, and dependencies on external systems.</p>\n<h3 id=\"time-spent\" style=\"position:relative;\"><a href=\"#time-spent\" aria-label=\"time spent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Time spent:</h3>\n<p>20 hours</p>\n<p><strong><a href=\"https://github.com/code-423n4/2023-06-canto-findings/issues/21#issuecomment-1611790848\">tkkwon1998 (Canto) confirmed</a></strong></p>\n<hr>\n<h1 id=\"disclosures\" style=\"position:relative;\"><a href=\"#disclosures\" aria-label=\"disclosures permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disclosures</h1>\n<p>C4 is an open organization governed by participants in the community.</p>\n<p>C4 Audits incentivize the discovery of exploits, vulnerabilities, and bugs in smart contracts. Security researchers are rewarded at an increasing rate for finding higher-risk issues. Audit submissions are judged by a knowledgeable security researcher and solidity developer and disclosed to sponsoring developers. C4 does not conduct formal verification regarding the provided code but instead provides final verification.</p>\n<p>C4 does not provide any guarantee or warranty regarding the security of this project. All smart contract software should be used at the sole risk and responsibility of users.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .dark-default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .dark-default-dark .mtk3 { color: #6A9955; }\n  .dark-default-dark .mtk4 { color: #569CD6; }\n  .dark-default-dark .mtk1 { color: #D4D4D4; }\n  .dark-default-dark .mtk12 { color: #9CDCFE; }\n  .dark-default-dark .mtk11 { color: #DCDCAA; }\n  .dark-default-dark .mtk8 { color: #CE9178; }\n  .dark-default-dark .mtk7 { color: #B5CEA8; }\n  .dark-default-dark .mtk15 { color: #C586C0; }\n  .dark-default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>",
  "toc": "<ul>\n<li>\n<p><a href=\"#overview\">Overview</a></p>\n<ul>\n<li><a href=\"#about-c4\">About C4</a></li>\n<li><a href=\"#wardens\">Wardens</a></li>\n</ul>\n</li>\n<li><a href=\"#summary\">Summary</a></li>\n<li><a href=\"#scope\">Scope</a></li>\n<li><a href=\"#severity-criteria\">Severity Criteria</a></li>\n<li>\n<p><a href=\"#high-risk-findings-1\">High Risk Findings (1)</a></p>\n<ul>\n<li><a href=\"#h-01-pre-defined-limit-is-different-from-the-spec\">[H-01] Pre-defined limit is different from the spec</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#medium-risk-findings-1\">Medium Risk Findings (1)</a></p>\n<ul>\n<li><a href=\"#m-01-potential-risk-of-using-swappedamount-in-case-of-swap-error\">[M-01] Potential risk of using <code>swappedAmount</code> in case of swap error</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#low-risk-and-non-critical-issues\">Low Risk and Non-Critical Issues</a></p>\n<ul>\n<li><a href=\"#issue-summary\">Issue Summary</a></li>\n<li><a href=\"#l-01-misleading-method-godoc-calculatewithexactinput\">L-01 Misleading method GoDoc <code>calculateWithExactInput</code></a></li>\n<li><a href=\"#l-02-misleading-method-godoc-getpoolbalances\">L-02 Misleading method GoDoc <code>GetPoolBalances</code></a></li>\n<li><a href=\"#n-01-dead-godoc-params-for-tradeexactinputforoutput\">N-01 Dead GoDoc params for <code>TradeExactInputForOutput</code></a></li>\n<li><a href=\"#n-02-dead-godoc-params-for-tradeinputforexactoutput\">N-02 Dead GoDoc params for <code>TradeInputForExactOutput</code></a></li>\n<li><a href=\"#n-03-params-has-both-value-and-reference-receivers\">N-03 Params has both value and reference receivers</a></li>\n<li><a href=\"#n-04-deprecated-method-on-emitevent-used\">N-04 Deprecated method on <code>EmitEvent</code> used</a></li>\n<li><a href=\"#n-05-silent-fail-on-no-whitelisting\">N-05 Silent fail on no whitelisting</a></li>\n<li><a href=\"#n-06-silent-fail-on-recipient-account-being-a-module\">N-06 Silent fail on recipient account being a module</a></li>\n<li><a href=\"#n-07-silent-fail-on-missing-erc20-mapping\">N-07 Silent fail on missing ERC20 mapping</a></li>\n<li><a href=\"#n-08-silent-fail-on-trading-pair-disable\">N-08 Silent fail on trading pair disable</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#audit-analysis\">Audit Analysis</a></p>\n<ul>\n<li><a href=\"#approach-to-auditing-the-canto-platform\">Approach to Auditing the Canto Platform</a></li>\n<li><a href=\"#architecture-recommendations\">Architecture Recommendations</a></li>\n<li><a href=\"#codebase-quality-analysis\">Codebase Quality Analysis</a></li>\n<li><a href=\"#centralization-risks\">Centralization Risks</a></li>\n<li><a href=\"#mechanism-review\">Mechanism Review</a></li>\n<li><a href=\"#handling-of-slippage\">Handling of Slippage</a></li>\n<li><a href=\"#handling-of-non-existing-pools\">Handling of Non-Existing Pools</a></li>\n<li><a href=\"#systemic-risks\">Systemic Risks</a></li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n</ul>\n</li>\n<li><a href=\"#disclosures\">Disclosures</a></li>\n</ul>"
}